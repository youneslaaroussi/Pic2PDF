<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.1 (20251006.0113)
 -->
<!-- Pages: 1 -->
<svg width="1160pt" height="508pt"
 viewBox="0.00 0.00 1160.00 508.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 503.5)">
<polygon fill="white" stroke="none" points="-4,4 -4,-503.5 1156,-503.5 1156,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_monitoring</title>
<path fill="#e6ffe6" stroke="black" d="M396,-292C396,-292 1132,-292 1132,-292 1138,-292 1144,-298 1144,-304 1144,-304 1144,-378.75 1144,-378.75 1144,-384.75 1138,-390.75 1132,-390.75 1132,-390.75 396,-390.75 396,-390.75 390,-390.75 384,-384.75 384,-378.75 384,-378.75 384,-304 384,-304 384,-298 390,-292 396,-292"/>
<text xml:space="preserve" text-anchor="middle" x="764" y="-375.35" font-family="Comic Sans MS" font-size="12.00">Real&#45;Time Monitoring</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_analysis</title>
<path fill="#fff8dc" stroke="black" d="M587,-8C587,-8 715,-8 715,-8 721,-8 727,-14 727,-20 727,-20 727,-236.75 727,-236.75 727,-242.75 721,-248.75 715,-248.75 715,-248.75 587,-248.75 587,-248.75 581,-248.75 575,-242.75 575,-236.75 575,-236.75 575,-20 575,-20 575,-14 581,-8 587,-8"/>
<text xml:space="preserve" text-anchor="middle" x="651" y="-233.35" font-family="Comic Sans MS" font-size="12.00">Performance Analysis</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_decisions</title>
<path fill="#ffe6e6" stroke="black" d="M20,-8C20,-8 476,-8 476,-8 482,-8 488,-14 488,-20 488,-20 488,-94.75 488,-94.75 488,-100.75 482,-106.75 476,-106.75 476,-106.75 20,-106.75 20,-106.75 14,-106.75 8,-100.75 8,-94.75 8,-94.75 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text xml:space="preserve" text-anchor="middle" x="248" y="-91.35" font-family="Comic Sans MS" font-size="12.00">Adaptive Optimization</text>
</g>
<!-- mach_task -->
<g id="node1" class="node">
<title>mach_task</title>
<path fill="#90ee90" stroke="black" d="M899.88,-357.5C899.88,-357.5 784.12,-357.5 784.12,-357.5 778.12,-357.5 772.12,-351.5 772.12,-345.5 772.12,-345.5 772.12,-312 772.12,-312 772.12,-306 778.12,-300 784.12,-300 784.12,-300 899.88,-300 899.88,-300 905.88,-300 911.88,-306 911.88,-312 911.88,-312 911.88,-345.5 911.88,-345.5 911.88,-351.5 905.88,-357.5 899.88,-357.5"/>
<text xml:space="preserve" text-anchor="middle" x="842" y="-343.05" font-family="Comic Sans MS" font-size="11.00">mach_task_basic_info()</text>
<text xml:space="preserve" text-anchor="middle" x="842" y="-326.55" font-family="Comic Sans MS" font-size="11.00">Resident memory (RSS)</text>
<text xml:space="preserve" text-anchor="middle" x="842" y="-310.05" font-family="Comic Sans MS" font-size="11.00">Real measurements</text>
</g>
<!-- stats -->
<g id="node5" class="node">
<title>stats</title>
<path fill="#fafad2" stroke="black" d="M707,-215.5C707,-215.5 595,-215.5 595,-215.5 589,-215.5 583,-209.5 583,-203.5 583,-203.5 583,-170 583,-170 583,-164 589,-158 595,-158 595,-158 707,-158 707,-158 713,-158 719,-164 719,-170 719,-170 719,-203.5 719,-203.5 719,-209.5 713,-215.5 707,-215.5"/>
<text xml:space="preserve" text-anchor="middle" x="651" y="-201.05" font-family="Comic Sans MS" font-size="11.00">ProcessMetrics</text>
<text xml:space="preserve" text-anchor="middle" x="651" y="-184.55" font-family="Comic Sans MS" font-size="11.00">Memory: Â±10MB delta</text>
<text xml:space="preserve" text-anchor="middle" x="651" y="-168.05" font-family="Comic Sans MS" font-size="11.00">Thermal: state changes</text>
</g>
<!-- mach_task&#45;&gt;stats -->
<g id="edge5" class="edge">
<title>mach_task&#45;&gt;stats</title>
<path fill="none" stroke="black" d="M842,-299.62C842,-260.54 842,-196 842,-196 842,-196 730.93,-196 730.93,-196"/>
<polygon fill="black" stroke="black" points="730.93,-192.5 720.93,-196 730.93,-199.5 730.93,-192.5"/>
</g>
<!-- thermal -->
<g id="node2" class="node">
<title>thermal</title>
<path fill="#90ee90" stroke="black" d="M1123.75,-349.25C1123.75,-349.25 974.25,-349.25 974.25,-349.25 968.25,-349.25 962.25,-343.25 962.25,-337.25 962.25,-337.25 962.25,-320.25 962.25,-320.25 962.25,-314.25 968.25,-308.25 974.25,-308.25 974.25,-308.25 1123.75,-308.25 1123.75,-308.25 1129.75,-308.25 1135.75,-314.25 1135.75,-320.25 1135.75,-320.25 1135.75,-337.25 1135.75,-337.25 1135.75,-343.25 1129.75,-349.25 1123.75,-349.25"/>
<text xml:space="preserve" text-anchor="middle" x="1049" y="-334.8" font-family="Comic Sans MS" font-size="11.00">ProcessInfo.thermalState</text>
<text xml:space="preserve" text-anchor="middle" x="1049" y="-318.3" font-family="Comic Sans MS" font-size="11.00">Nominal/Fair/Serious/Critical</text>
</g>
<!-- thermal&#45;&gt;stats -->
<g id="edge6" class="edge">
<title>thermal&#45;&gt;stats</title>
<path fill="none" stroke="black" d="M1049,-307.97C1049,-266.41 1049,-177 1049,-177 1049,-177 730.93,-177 730.93,-177"/>
<polygon fill="black" stroke="black" points="730.93,-173.5 720.93,-177 730.93,-180.5 730.93,-173.5"/>
</g>
<!-- battery -->
<g id="node3" class="node">
<title>battery</title>
<path fill="#90ee90" stroke="black" d="M518.12,-349.25C518.12,-349.25 403.88,-349.25 403.88,-349.25 397.88,-349.25 391.88,-343.25 391.88,-337.25 391.88,-337.25 391.88,-320.25 391.88,-320.25 391.88,-314.25 397.88,-308.25 403.88,-308.25 403.88,-308.25 518.12,-308.25 518.12,-308.25 524.12,-308.25 530.12,-314.25 530.12,-320.25 530.12,-320.25 530.12,-337.25 530.12,-337.25 530.12,-343.25 524.12,-349.25 518.12,-349.25"/>
<text xml:space="preserve" text-anchor="middle" x="461" y="-334.8" font-family="Comic Sans MS" font-size="11.00">UIDevice.batteryLevel</text>
<text xml:space="preserve" text-anchor="middle" x="461" y="-318.3" font-family="Comic Sans MS" font-size="11.00">UIDevice.batteryState</text>
</g>
<!-- battery&#45;&gt;stats -->
<g id="edge7" class="edge">
<title>battery&#45;&gt;stats</title>
<path fill="none" stroke="black" d="M504.88,-307.87C504.88,-272.36 504.88,-204 504.88,-204 504.88,-204 571.13,-204 571.13,-204"/>
<polygon fill="black" stroke="black" points="571.13,-207.5 581.13,-204 571.13,-200.5 571.13,-207.5"/>
</g>
<!-- signpost -->
<g id="node4" class="node">
<title>signpost</title>
<path fill="#90ee90" stroke="black" d="M709.62,-357.5C709.62,-357.5 592.38,-357.5 592.38,-357.5 586.38,-357.5 580.38,-351.5 580.38,-345.5 580.38,-345.5 580.38,-312 580.38,-312 580.38,-306 586.38,-300 592.38,-300 592.38,-300 709.62,-300 709.62,-300 715.62,-300 721.62,-306 721.62,-312 721.62,-312 721.62,-345.5 721.62,-345.5 721.62,-351.5 715.62,-357.5 709.62,-357.5"/>
<text xml:space="preserve" text-anchor="middle" x="651" y="-343.05" font-family="Comic Sans MS" font-size="11.00">os.signpost</text>
<text xml:space="preserve" text-anchor="middle" x="651" y="-326.55" font-family="Comic Sans MS" font-size="11.00">Instruments integration</text>
<text xml:space="preserve" text-anchor="middle" x="651" y="-310.05" font-family="Comic Sans MS" font-size="11.00">Perf profiling</text>
</g>
<!-- signpost&#45;&gt;stats -->
<g id="edge8" class="edge">
<title>signpost&#45;&gt;stats</title>
<path fill="none" stroke="black" d="M651,-299.67C651,-299.67 651,-227.3 651,-227.3"/>
<polygon fill="black" stroke="black" points="654.5,-227.3 651,-217.3 647.5,-227.3 654.5,-227.3"/>
</g>
<!-- history -->
<g id="node6" class="node">
<title>history</title>
<path fill="#fafad2" stroke="black" d="M706.62,-73.5C706.62,-73.5 595.38,-73.5 595.38,-73.5 589.38,-73.5 583.38,-67.5 583.38,-61.5 583.38,-61.5 583.38,-28 583.38,-28 583.38,-22 589.38,-16 595.38,-16 595.38,-16 706.62,-16 706.62,-16 712.62,-16 718.62,-22 718.62,-28 718.62,-28 718.62,-61.5 718.62,-61.5 718.62,-67.5 712.62,-73.5 706.62,-73.5"/>
<text xml:space="preserve" text-anchor="middle" x="651" y="-59.05" font-family="Comic Sans MS" font-size="11.00">SwiftData Storage</text>
<text xml:space="preserve" text-anchor="middle" x="651" y="-42.55" font-family="Comic Sans MS" font-size="11.00">Per&#45;generation metrics</text>
<text xml:space="preserve" text-anchor="middle" x="651" y="-26.05" font-family="Comic Sans MS" font-size="11.00">Historical trends</text>
</g>
<!-- stats&#45;&gt;history -->
<g id="edge9" class="edge">
<title>stats&#45;&gt;history</title>
<path fill="none" stroke="black" d="M651,-157.67C651,-157.67 651,-85.3 651,-85.3"/>
<polygon fill="black" stroke="black" points="654.5,-85.3 651,-75.3 647.5,-85.3 654.5,-85.3"/>
<text xml:space="preserve" text-anchor="middle" x="672.75" y="-119.5" font-family="Comic Sans MS" font-size="10.00">persist</text>
</g>
<!-- mode_switch -->
<g id="node7" class="node">
<title>mode_switch</title>
<path fill="#ffb6c1" stroke="black" d="M300.12,-65.25C300.12,-65.25 191.88,-65.25 191.88,-65.25 185.88,-65.25 179.88,-59.25 179.88,-53.25 179.88,-53.25 179.88,-36.25 179.88,-36.25 179.88,-30.25 185.88,-24.25 191.88,-24.25 191.88,-24.25 300.12,-24.25 300.12,-24.25 306.12,-24.25 312.12,-30.25 312.12,-36.25 312.12,-36.25 312.12,-53.25 312.12,-53.25 312.12,-59.25 306.12,-65.25 300.12,-65.25"/>
<text xml:space="preserve" text-anchor="middle" x="246" y="-50.8" font-family="Comic Sans MS" font-size="11.00">Performance Mode</text>
<text xml:space="preserve" text-anchor="middle" x="246" y="-34.3" font-family="Comic Sans MS" font-size="11.00">Balanced/Power Saver</text>
</g>
<!-- stats&#45;&gt;mode_switch -->
<g id="edge10" class="edge">
<title>stats&#45;&gt;mode_switch</title>
<path fill="none" stroke="black" d="M582.53,-181C472.38,-181 268.04,-181 268.04,-181 268.04,-181 268.04,-77.25 268.04,-77.25"/>
<polygon fill="black" stroke="black" points="271.54,-77.25 268.04,-67.25 264.54,-77.25 271.54,-77.25"/>
<text xml:space="preserve" text-anchor="middle" x="434.5" y="-119.5" font-family="Comic Sans MS" font-size="10.00">threshold check</text>
</g>
<!-- throttle -->
<g id="node8" class="node">
<title>throttle</title>
<path fill="#ffb6c1" stroke="black" d="M118.12,-73.5C118.12,-73.5 27.87,-73.5 27.87,-73.5 21.87,-73.5 15.87,-67.5 15.87,-61.5 15.87,-61.5 15.87,-28 15.87,-28 15.87,-22 21.87,-16 27.87,-16 27.87,-16 118.12,-16 118.12,-16 124.12,-16 130.12,-22 130.12,-28 130.12,-28 130.12,-61.5 130.12,-61.5 130.12,-67.5 124.12,-73.5 118.12,-73.5"/>
<text xml:space="preserve" text-anchor="middle" x="73" y="-59.05" font-family="Comic Sans MS" font-size="11.00">Thermal Throttling</text>
<text xml:space="preserve" text-anchor="middle" x="73" y="-42.55" font-family="Comic Sans MS" font-size="11.00">Reduce maxTokens</text>
<text xml:space="preserve" text-anchor="middle" x="73" y="-26.05" font-family="Comic Sans MS" font-size="11.00">Batch size = 1</text>
</g>
<!-- stats&#45;&gt;throttle -->
<g id="edge11" class="edge">
<title>stats&#45;&gt;throttle</title>
<path fill="none" stroke="black" d="M582.74,-193C433.63,-193 92.04,-193 92.04,-193 92.04,-193 92.04,-85.2 92.04,-85.2"/>
<polygon fill="black" stroke="black" points="95.54,-85.2 92.04,-75.2 88.54,-85.2 95.54,-85.2"/>
<text xml:space="preserve" text-anchor="middle" x="246.88" y="-119.5" font-family="Comic Sans MS" font-size="10.00">if thermal &gt; Fair</text>
</g>
<!-- cache -->
<g id="node9" class="node">
<title>cache</title>
<path fill="#ffb6c1" stroke="black" d="M467.62,-73.5C467.62,-73.5 374.38,-73.5 374.38,-73.5 368.38,-73.5 362.38,-67.5 362.38,-61.5 362.38,-61.5 362.38,-28 362.38,-28 362.38,-22 368.38,-16 374.38,-16 374.38,-16 467.62,-16 467.62,-16 473.62,-16 479.62,-22 479.62,-28 479.62,-28 479.62,-61.5 479.62,-61.5 479.62,-67.5 473.62,-73.5 467.62,-73.5"/>
<text xml:space="preserve" text-anchor="middle" x="421" y="-59.05" font-family="Comic Sans MS" font-size="11.00">Model Caching</text>
<text xml:space="preserve" text-anchor="middle" x="421" y="-42.55" font-family="Comic Sans MS" font-size="11.00">Keep in RAM</text>
<text xml:space="preserve" text-anchor="middle" x="421" y="-26.05" font-family="Comic Sans MS" font-size="11.00">vs. reload from disk</text>
</g>
<!-- stats&#45;&gt;cache -->
<g id="edge12" class="edge">
<title>stats&#45;&gt;cache</title>
<path fill="none" stroke="black" d="M582.6,-170C519.57,-170 435.75,-170 435.75,-170 435.75,-170 435.75,-85.31 435.75,-85.31"/>
<polygon fill="black" stroke="black" points="439.25,-85.31 435.75,-75.31 432.25,-85.31 439.25,-85.31"/>
<text xml:space="preserve" text-anchor="middle" x="564.5" y="-119.5" font-family="Comic Sans MS" font-size="10.00">if memory &lt; 2GB</text>
</g>
<!-- inference -->
<g id="node10" class="node">
<title>inference</title>
<path fill="#b0e0e6" stroke="black" d="M503.12,-499.5C503.12,-499.5 418.88,-499.5 418.88,-499.5 412.88,-499.5 406.88,-493.5 406.88,-487.5 406.88,-487.5 406.88,-454 406.88,-454 406.88,-448 412.88,-442 418.88,-442 418.88,-442 503.12,-442 503.12,-442 509.12,-442 515.12,-448 515.12,-454 515.12,-454 515.12,-487.5 515.12,-487.5 515.12,-493.5 509.12,-499.5 503.12,-499.5"/>
<text xml:space="preserve" text-anchor="middle" x="461" y="-485.05" font-family="Comic Sans MS" font-size="11.00">LlmInference</text>
<text xml:space="preserve" text-anchor="middle" x="461" y="-468.55" font-family="Comic Sans MS" font-size="11.00">(MediaPipe)</text>
<text xml:space="preserve" text-anchor="middle" x="461" y="-452.05" font-family="Comic Sans MS" font-size="11.00">Running inference</text>
</g>
<!-- mode_switch&#45;&gt;inference -->
<g id="edge13" class="edge">
<title>mode_switch&#45;&gt;inference</title>
<path fill="none" stroke="blue" d="M223.96,-65.6C223.96,-151.18 223.96,-471 223.96,-471 223.96,-471 395.1,-471 395.1,-471"/>
<polygon fill="blue" stroke="blue" points="395.1,-474.5 405.1,-471 395.1,-467.5 395.1,-474.5"/>
<text xml:space="preserve" text-anchor="middle" x="159.88" y="-261.5" font-family="Comic Sans MS" font-size="10.00">update config</text>
</g>
<!-- throttle&#45;&gt;inference -->
<g id="edge14" class="edge">
<title>throttle&#45;&gt;inference</title>
<path fill="none" stroke="red" d="M53.96,-73.98C53.96,-172.3 53.96,-485 53.96,-485 53.96,-485 395.01,-485 395.01,-485"/>
<polygon fill="red" stroke="red" points="395.01,-488.5 405.01,-485 395.01,-481.5 395.01,-488.5"/>
<text xml:space="preserve" text-anchor="middle" x="46" y="-261.5" font-family="Comic Sans MS" font-size="10.00">reduce load</text>
</g>
<!-- cache&#45;&gt;inference -->
<g id="edge15" class="edge">
<title>cache&#45;&gt;inference</title>
<path fill="none" stroke="green" d="M377.12,-74C377.12,-167.95 377.12,-456 377.12,-456 377.12,-456 394.95,-456 394.95,-456"/>
<polygon fill="green" stroke="green" points="394.95,-459.5 404.95,-456 394.95,-452.5 394.95,-459.5"/>
<text xml:space="preserve" text-anchor="middle" x="346.38" y="-261.5" font-family="Comic Sans MS" font-size="10.00">optimize I/O</text>
</g>
<!-- inference&#45;&gt;mach_task -->
<g id="edge1" class="edge">
<title>inference&#45;&gt;mach_task</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M515.59,-461C620.94,-461 842,-461 842,-461 842,-461 842,-369.29 842,-369.29"/>
<polygon fill="black" stroke="black" points="845.5,-369.29 842,-359.29 838.5,-369.29 845.5,-369.29"/>
<text xml:space="preserve" text-anchor="middle" x="791.38" y="-403.5" font-family="Comic Sans MS" font-size="10.00">continuous</text>
</g>
<!-- inference&#45;&gt;thermal -->
<g id="edge2" class="edge">
<title>inference&#45;&gt;thermal</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M515.53,-480C661.29,-480 1049,-480 1049,-480 1049,-480 1049,-360.98 1049,-360.98"/>
<polygon fill="black" stroke="black" points="1052.5,-360.98 1049,-350.98 1045.5,-360.98 1052.5,-360.98"/>
<text xml:space="preserve" text-anchor="middle" x="977.62" y="-403.5" font-family="Comic Sans MS" font-size="10.00">observe</text>
</g>
<!-- inference&#45;&gt;battery -->
<g id="edge3" class="edge">
<title>inference&#45;&gt;battery</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M442.96,-441.67C442.96,-441.67 442.96,-361.02 442.96,-361.02"/>
<polygon fill="black" stroke="black" points="446.46,-361.02 442.96,-351.02 439.46,-361.02 446.46,-361.02"/>
<text xml:space="preserve" text-anchor="middle" x="469.25" y="-403.5" font-family="Comic Sans MS" font-size="10.00">poll</text>
</g>
<!-- inference&#45;&gt;signpost -->
<g id="edge4" class="edge">
<title>inference&#45;&gt;signpost</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M479.04,-441.64C479.04,-406.77 479.04,-353 479.04,-353 479.04,-353 568.55,-353 568.55,-353"/>
<polygon fill="black" stroke="black" points="568.55,-356.5 578.55,-353 568.55,-349.5 568.55,-356.5"/>
<text xml:space="preserve" text-anchor="middle" x="614.88" y="-403.5" font-family="Comic Sans MS" font-size="10.00">log events</text>
</g>
</g>
</svg>
